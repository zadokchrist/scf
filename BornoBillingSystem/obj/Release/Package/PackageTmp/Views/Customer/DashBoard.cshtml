
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_LayoutPagineted.cshtml";
}
<div class="">
    <div class="page-title">
        <div class="title_left">
            <h3>Dashboard Report</h3>
        </div>

        <div class="title_right">
            <div class="col-md-5 col-sm-5 col-xs-12 form-group pull-right top_search">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search for...">
                    <span class="input-group-btn">
                        <button class="btn btn-secondary" type="button">Go!</button>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <div class="clearfix"></div>

    <div class="row">

        <div class="col-md-12 col-sm-12 col-xs-12">
            <div class="x_panel">
                <div class="x_title">
                    <ul class="nav navbar-right panel_toolbox">
                        <li>
                            <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a class="dropdown-item" href="#">Settings 1</a>
                                <a class="dropdown-item" href="#">Settings 2</a>
                            </div>
                        </li>
                        <li>
                            <a class="close-link"><i class="fa fa-close"></i></a>
                        </li>
                    </ul>
                    <div class="clearfix"></div>
                </div>
                <div class="x_content">
                    <!-- Charts-->
                    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                    <h6 class="bg-green text-center">@ViewBag.Message</h6>
                    <h6 class="bg-red text-center">@ViewBag.Error</h6>
                    <canvas id="barChart" width="400" height="200"></canvas>
                    <script>
                        //retrieve data from viewbag and parse it back to Json
                        var custstats = @Html.Raw(ViewBag.CustomerStats);

                        // Prepare the data for the chart
                        var labels = custstats.map(item => item.Status);
                        var count = custstats.map(item => item.Count);
                        // Sample data for the chart
                        var data = {
                            labels: labels,
                            datasets: [
                                {
                                    label: 'Repayment Data',
                                    backgroundColor:  ['red','green','yellow','orange'],//['green','rgb(54, 162, 235)','rgb(255, 205, 86)'],//'rgba(54, 162, 235, 0.2)',
                                    borderColor: 'rgba(54, 162, 235, 1)',
                                    borderWidth: 1,
                                    data: count,
                                }
                            ]
                        };

                        // Options for the chart
                        var options = {
                            responsive: true,
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        };

                        // Create the bar chart
                        var ctx = document.getElementById('barChart').getContext('2d');
                        var myChart = new Chart(ctx, {
                            type: 'bar',
                            data: data,
                            options: options
                        });
                                    </script>
                        @*<script>
                            //retrieve data from viewbag and parse it back to Json
                            var custstats = @Html.Raw(ViewBag.CustomerStats);

                            // Prepare the data for the chart
                            var labels = custstats.map(item => item.Status);
                            var count = custstats.map(item => item.Count);

                            //create bar chart
                            var control = document.getElementById("barChart").getContext('2d');

                            var customerChart = new Chart(control,
                                {
                                    type : 'bar',
                                    data : {
                                        labels : labels,
                                        datasets:[
                                            {
                                                label: 'Customer Stats',
                                                data: custstats,
                                                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                                borderColor: 'rgba(54, 162, 235, 1)',
                                                borderWidth: 1
                                            }

                                        ],
                                        options:{
                                            responsive: true,
                                            scales:{
                                                y:{
                                                    beginAtZero: true
                                                }
                                            }
                                        },
                                        title: {
                                            display: true,
                                            text: 'Chart.js Bar Chart'
                                        }

                                    }
                                }
                                );

                        </script>*@
                        

                </div>
            </div>
        </div>
    </div>
</div>

